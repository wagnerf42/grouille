#[macro_use]
extern crate grouille;
use grouille::{Point, Polygon};

fn main() {
    let complex_polygon = Polygon::new(vec![
        Point::new(-1.5, 0.2071000039577484),
        Point::new(-1.29497096657753, 0.7020999744534493),
        Point::new(-1.2928999662399292, 0.707099974155426),
        Point::new(-1.1728129839897157, 0.9970709997415542),
        Point::new(-1.1715999841690063, 1.0),
        Point::new(-1.1728129839897157, 1.0029289996623993),
        Point::new(-1.2928999662399292, 1.2928999662399292),
        Point::new(-1.0029289996623993, 1.1728129839897157),
        Point::new(-1.0, 1.1715999841690063),
        Point::new(-0.7100289744138718, 1.2916869664192199),
        Point::new(-0.707099974155426, 1.2928999662399292),
        Point::new(-0.2121000036597252, 1.4979289996623992),
        Point::new(-0.2071000039577484, 1.5),
        Point::new(-0.002071000039577484, 1.005),
        Point::new(0.0, 1.0),
        Point::new(0.20502900391817092, 1.495),
        Point::new(0.2071000039577484, 1.5),
        Point::new(0.7020999744534493, 1.29497096657753),
        Point::new(0.707099974155426, 1.2928999662399292),
        Point::new(0.9970709997415542, 1.1728129839897157),
        Point::new(1.0, 1.1715999841690063),
        Point::new(1.2899709665775299, 1.2916869664192199),
        Point::new(1.2928999662399292, 1.2928999662399292),
        Point::new(1.2916869664192199, 1.2899709665775299),
        Point::new(1.1715999841690063, 1.0),
        Point::new(1.2916869664192199, 0.7100289744138718),
        Point::new(1.2928999662399292, 0.707099974155426),
        Point::new(1.4979289996623992, 0.2121000036597252),
        Point::new(1.5, 0.2071000039577484),
        Point::new(1.495, 0.20502900391817092),
        Point::new(1.0, 0.0),
        Point::new(1.495, -0.20502900391817092),
        Point::new(1.5, -0.2071000039577484),
        Point::new(1.4979289996623992, -0.2121000036597252),
        Point::new(1.2928999662399292, -0.707099974155426),
        Point::new(1.2916869664192199, -0.7100289744138718),
        Point::new(1.1715999841690063, -1.0),
        Point::new(1.2916869664192199, -1.2899709665775299),
        Point::new(1.2928999662399292, -1.2928999662399292),
        Point::new(1.2899709665775299, -1.2916869664192199),
        Point::new(1.0, -1.1715999841690063),
        Point::new(0.9970709997415542, -1.1728129839897157),
        Point::new(0.707099974155426, -1.2928999662399292),
        Point::new(0.7020999744534493, -1.29497096657753),
        Point::new(0.2071000039577484, -1.5),
        Point::new(0.20502900391817092, -1.495),
        Point::new(0.0, -1.0),
        Point::new(-0.002071000039577484, -1.005),
        Point::new(-0.2071000039577484, -1.5),
        Point::new(-0.2121000036597252, -1.4979289996623992),
        Point::new(-0.707099974155426, -1.2928999662399292),
        Point::new(-0.7100289744138718, -1.2916869664192199),
        Point::new(-1.0, -1.1715999841690063),
        Point::new(-1.0029289996623993, -1.1728129839897157),
        Point::new(-1.2928999662399292, -1.2928999662399292),
        Point::new(-1.1728129839897157, -1.0029289996623993),
        Point::new(-1.1715999841690063, -1.0),
        Point::new(-1.1728129839897157, -0.9970709997415542),
        Point::new(-1.2928999662399292, -0.707099974155426),
        Point::new(-1.29497096657753, -0.7020999744534493),
        Point::new(-1.5, -0.2071000039577484),
        Point::new(-1.005, -0.002071000039577484),
        Point::new(-1.0, 0.0),
        Point::new(-1.005, 0.002071000039577484),
    ]);
    tycat!(complex_polygon, complex_polygon.points());
    let simple_polygon = complex_polygon.simplify();
    tycat!(simple_polygon, simple_polygon.points());
    for y in [0.0, 1.0, 1.2].iter() {
        let intersections = simple_polygon.intersections_at_y(*y);
        let points = intersections
            .iter()
            .map(|x| Point::new(*x, *y))
            .collect::<Vec<_>>();
        tycat!(simple_polygon, points);
    }
}
